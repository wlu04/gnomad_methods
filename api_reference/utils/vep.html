<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>gnomad.utils.vep &mdash; gnomad master documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Resource Sources" href="../../resource_sources.html" />
    <link rel="prev" title="gnomad.utils.vcf" href="vcf.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> gnomad
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../variant_qc/index.html">variant_qc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assessment/index.html">assessment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sample_qc/index.html">sample_qc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/index.html">resources</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">utils</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="annotations.html">annotations</a></li>
<li class="toctree-l3"><a class="reference internal" href="file_utils.html">file_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="filtering.html">filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="gen_stats.html">gen_stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="intervals.html">intervals</a></li>
<li class="toctree-l3"><a class="reference internal" href="liftover.html">liftover</a></li>
<li class="toctree-l3"><a class="reference internal" href="plotting.html">plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_genome.html">reference_genome</a></li>
<li class="toctree-l3"><a class="reference internal" href="release.html">release</a></li>
<li class="toctree-l3"><a class="reference internal" href="slack.html">slack</a></li>
<li class="toctree-l3"><a class="reference internal" href="sparse_mt.html">sparse_mt</a></li>
<li class="toctree-l3"><a class="reference internal" href="vcf.html">vcf</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">vep</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../resource_sources.html">Resource Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Change Log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">gnomad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">gnomad</a> &raquo;</li>
          <li><a href="index.html">gnomad.utils</a> &raquo;</li>
      <li>gnomad.utils.vep</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api_reference/utils/vep.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gnomad-utils-vep">
<h1>gnomad.utils.vep<a class="headerlink" href="#gnomad-utils-vep" title="Permalink to this headline">¶</a></h1>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.POSSIBLE_REFS" title="gnomad.utils.vep.POSSIBLE_REFS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.POSSIBLE_REFS</span></code></a></p></td>
<td><p>Constant containing supported references</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.VEP_CONFIG_PATH" title="gnomad.utils.vep.VEP_CONFIG_PATH"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.VEP_CONFIG_PATH</span></code></a></p></td>
<td><p>Constant that contains the local path to the VEP config file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.VEP_CSQ_FIELDS" title="gnomad.utils.vep.VEP_CSQ_FIELDS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.VEP_CSQ_FIELDS</span></code></a></p></td>
<td><p>Constant that defines the order of VEP annotations used in VCF export.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.VEP_CSQ_HEADER" title="gnomad.utils.vep.VEP_CSQ_HEADER"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.VEP_CSQ_HEADER</span></code></a></p></td>
<td><p>Constant that contains description for VEP used in VCF export.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.LOFTEE_LABELS" title="gnomad.utils.vep.LOFTEE_LABELS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.LOFTEE_LABELS</span></code></a></p></td>
<td><p>Constant that contains annotations added by LOFTEE.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.LOF_CSQ_SET" title="gnomad.utils.vep.LOF_CSQ_SET"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.LOF_CSQ_SET</span></code></a></p></td>
<td><p>Set containing loss-of-function consequence strings.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.get_vep_help" title="gnomad.utils.vep.get_vep_help"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.get_vep_help</span></code></a>([vep_config_path])</p></td>
<td><p>Return the output of vep –help which includes the VEP version.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.get_vep_context" title="gnomad.utils.vep.get_vep_context"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.get_vep_context</span></code></a>([ref])</p></td>
<td><p>Get VEP context resource for the genome build <cite>ref</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.vep_or_lookup_vep" title="gnomad.utils.vep.vep_or_lookup_vep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.vep_or_lookup_vep</span></code></a>(ht[, …])</p></td>
<td><p>VEP a table, or lookup variants in a reference database.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.add_most_severe_consequence_to_consequence" title="gnomad.utils.vep.add_most_severe_consequence_to_consequence"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.add_most_severe_consequence_to_consequence</span></code></a>(tc)</p></td>
<td><p>Add most_severe_consequence annotation to transcript consequences.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.process_consequences" title="gnomad.utils.vep.process_consequences"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.process_consequences</span></code></a>(mt[, …])</p></td>
<td><p>Add most_severe_consequence into [vep_root].transcript_consequences, and worst_csq_by_gene, any_lof into [vep_root].</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.filter_vep_to_canonical_transcripts" title="gnomad.utils.vep.filter_vep_to_canonical_transcripts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.filter_vep_to_canonical_transcripts</span></code></a>(mt)</p></td>
<td><p>Filter VEP transcript consequences to those in the canonical transcript.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.filter_vep_to_synonymous_variants" title="gnomad.utils.vep.filter_vep_to_synonymous_variants"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.filter_vep_to_synonymous_variants</span></code></a>(mt)</p></td>
<td><p>Filter VEP transcript consequences to those with a most severe consequence of synonymous_variant.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#gnomad.utils.vep.vep_struct_to_csq" title="gnomad.utils.vep.vep_struct_to_csq"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.vep_struct_to_csq</span></code></a>(vep_expr)</p></td>
<td><p>Given a VEP Struct, returns and array of VEP VCF CSQ strings (one per consequence in the struct).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#gnomad.utils.vep.get_most_severe_consequence_for_summary" title="gnomad.utils.vep.get_most_severe_consequence_for_summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gnomad.utils.vep.get_most_severe_consequence_for_summary</span></code></a>(ht)</p></td>
<td><p>Prepare a hail Table for summary statistics generation.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-gnomad.utils.vep"></span><dl class="data">
<dt id="gnomad.utils.vep.POSSIBLE_REFS">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">POSSIBLE_REFS</code><em class="property"> = ('GRCh37', 'GRCh38')</em><a class="headerlink" href="#gnomad.utils.vep.POSSIBLE_REFS" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant containing supported references</p>
</dd></dl>

<dl class="data">
<dt id="gnomad.utils.vep.VEP_CONFIG_PATH">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">VEP_CONFIG_PATH</code><em class="property"> = 'file:///vep_data/vep-gcloud.json'</em><a class="headerlink" href="#gnomad.utils.vep.VEP_CONFIG_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant that contains the local path to the VEP config file</p>
</dd></dl>

<dl class="data">
<dt id="gnomad.utils.vep.VEP_CSQ_FIELDS">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">VEP_CSQ_FIELDS</code><em class="property"> = 'Allele|Consequence|IMPACT|SYMBOL|Gene|Feature_type|Feature|BIOTYPE|EXON|INTRON|HGVSc|HGVSp|cDNA_position|CDS_position|Protein_position|Amino_acids|Codons|ALLELE_NUM|DISTANCE|STRAND|VARIANT_CLASS|MINIMISED|SYMBOL_SOURCE|HGNC_ID|CANONICAL|TSL|APPRIS|CCDS|ENSP|SWISSPROT|TREMBL|UNIPARC|GENE_PHENO|SIFT|PolyPhen|DOMAINS|HGVS_OFFSET|MOTIF_NAME|MOTIF_POS|HIGH_INF_POS|MOTIF_SCORE_CHANGE|LoF|LoF_filter|LoF_flags|LoF_info'</em><a class="headerlink" href="#gnomad.utils.vep.VEP_CSQ_FIELDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant that defines the order of VEP annotations used in VCF export.</p>
</dd></dl>

<dl class="data">
<dt id="gnomad.utils.vep.VEP_CSQ_HEADER">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">VEP_CSQ_HEADER</code><em class="property"> = 'Consequence annotations from Ensembl VEP. Format: Allele|Consequence|IMPACT|SYMBOL|Gene|Feature_type|Feature|BIOTYPE|EXON|INTRON|HGVSc|HGVSp|cDNA_position|CDS_position|Protein_position|Amino_acids|Codons|ALLELE_NUM|DISTANCE|STRAND|VARIANT_CLASS|MINIMISED|SYMBOL_SOURCE|HGNC_ID|CANONICAL|TSL|APPRIS|CCDS|ENSP|SWISSPROT|TREMBL|UNIPARC|GENE_PHENO|SIFT|PolyPhen|DOMAINS|HGVS_OFFSET|MOTIF_NAME|MOTIF_POS|HIGH_INF_POS|MOTIF_SCORE_CHANGE|LoF|LoF_filter|LoF_flags|LoF_info'</em><a class="headerlink" href="#gnomad.utils.vep.VEP_CSQ_HEADER" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant that contains description for VEP used in VCF export.</p>
</dd></dl>

<dl class="data">
<dt id="gnomad.utils.vep.LOFTEE_LABELS">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">LOFTEE_LABELS</code><em class="property"> = ['HC', 'LC', 'OS']</em><a class="headerlink" href="#gnomad.utils.vep.LOFTEE_LABELS" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant that contains annotations added by LOFTEE.</p>
</dd></dl>

<dl class="data">
<dt id="gnomad.utils.vep.LOF_CSQ_SET">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">LOF_CSQ_SET</code><em class="property"> = {'frameshift_variant', 'splice_acceptor_variant', 'splice_donor_variant', 'stop_gained'}</em><a class="headerlink" href="#gnomad.utils.vep.LOF_CSQ_SET" title="Permalink to this definition">¶</a></dt>
<dd><p>Set containing loss-of-function consequence strings.</p>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.get_vep_help">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">get_vep_help</code><span class="sig-paren">(</span><em class="sig-param">vep_config_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#get_vep_help"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.get_vep_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the output of vep –help which includes the VEP version.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If no <cite>vep_config_path</cite> is supplied, this function will only work for Dataproc clusters
created with <cite>hailctl dataproc start –vep</cite>. It assumes that the command is <cite>/path/to/vep</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vep_config_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Optional path to use as the VEP config file. If None, <cite>VEP_CONFIG_URI</cite> environment variable is used</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VEP help string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.get_vep_context">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">get_vep_context</code><span class="sig-paren">(</span><em class="sig-param">ref=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#get_vep_context"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.get_vep_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Get VEP context resource for the genome build <cite>ref</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ref</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Genome build. If None, <cite>hl.default_reference</cite> is used</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="../resources/resource_utils.html#gnomad.resources.resource_utils.VersionedTableResource" title="gnomad.resources.resource_utils.VersionedTableResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">VersionedTableResource</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>VEPed context resource</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.vep_or_lookup_vep">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">vep_or_lookup_vep</code><span class="sig-paren">(</span><em class="sig-param">ht</em>, <em class="sig-param">reference_vep_ht=None</em>, <em class="sig-param">reference=None</em>, <em class="sig-param">vep_config_path=None</em>, <em class="sig-param">vep_version=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#vep_or_lookup_vep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.vep_or_lookup_vep" title="Permalink to this definition">¶</a></dt>
<dd><p>VEP a table, or lookup variants in a reference database.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If <cite>reference_vep_ht</cite> is supplied, no check is performed to confirm <cite>reference_vep_ht</cite> was
generated with the same version of VEP / VEP configuration as the VEP referenced in <cite>vep_config_path</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ht</strong> – Input Table</p></li>
<li><p><strong>reference_vep_ht</strong> – A reference database with VEP annotations (must be in top-level <cite>vep</cite>)</p></li>
<li><p><strong>reference</strong> – If reference_vep_ht is not specified, find a suitable one in reference (if None, grabs from hl.default_reference)</p></li>
<li><p><strong>vep_config_path</strong> – vep_config to pass to hl.vep (if None, a suitable one for <cite>reference</cite> is chosen)</p></li>
<li><p><strong>vep_version</strong> – Version of VEPed context Table to use (if None, the default <cite>vep_context</cite> resource will be used)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>VEPed Table</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.add_most_severe_consequence_to_consequence">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">add_most_severe_consequence_to_consequence</code><span class="sig-paren">(</span><em class="sig-param">tc</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#add_most_severe_consequence_to_consequence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.add_most_severe_consequence_to_consequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Add most_severe_consequence annotation to transcript consequences.</p>
<p>This is for a given transcript, as there are often multiple annotations for a single transcript:
e.g. splice_region_variant&amp;intron_variant -&gt; splice_region_variant</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tc</strong> (<a class="reference external" href="https://hail.is/docs/0.2/hail.expr.StructExpression.html#hail.expr.StructExpression" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StructExpression</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://hail.is/docs/0.2/hail.expr.StructExpression.html#hail.expr.StructExpression" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StructExpression</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.process_consequences">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">process_consequences</code><span class="sig-paren">(</span><em class="sig-param">mt</em>, <em class="sig-param">vep_root='vep'</em>, <em class="sig-param">penalize_flags=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#process_consequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.process_consequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Add most_severe_consequence into [vep_root].transcript_consequences, and worst_csq_by_gene, any_lof into [vep_root].</p>
<p><cite>most_severe_consequence</cite> is the worst consequence for a transcript.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mt</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference external" href="https://hail.is/docs/0.2/hail.MatrixTable.html#hail.MatrixTable" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixTable</span></code></a>, <a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>]) – Input MT</p></li>
<li><p><strong>vep_root</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Root for vep annotation (probably vep)</p></li>
<li><p><strong>penalize_flags</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to penalize LOFTEE flagged variants, or treat them as equal to HC</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference external" href="https://hail.is/docs/0.2/hail.MatrixTable.html#hail.MatrixTable" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixTable</span></code></a>, <a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MT with better formatted consequences</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.filter_vep_to_canonical_transcripts">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">filter_vep_to_canonical_transcripts</code><span class="sig-paren">(</span><em class="sig-param">mt</em>, <em class="sig-param">vep_root='vep'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#filter_vep_to_canonical_transcripts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.filter_vep_to_canonical_transcripts" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter VEP transcript consequences to those in the canonical transcript.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mt</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference external" href="https://hail.is/docs/0.2/hail.MatrixTable.html#hail.MatrixTable" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixTable</span></code></a>, <a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>]) – </p></li>
<li><p><strong>vep_root</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference external" href="https://hail.is/docs/0.2/hail.MatrixTable.html#hail.MatrixTable" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixTable</span></code></a>, <a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.filter_vep_to_synonymous_variants">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">filter_vep_to_synonymous_variants</code><span class="sig-paren">(</span><em class="sig-param">mt</em>, <em class="sig-param">vep_root='vep'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#filter_vep_to_synonymous_variants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.filter_vep_to_synonymous_variants" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter VEP transcript consequences to those with a most severe consequence of synonymous_variant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mt</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference external" href="https://hail.is/docs/0.2/hail.MatrixTable.html#hail.MatrixTable" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixTable</span></code></a>, <a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>]) – </p></li>
<li><p><strong>vep_root</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference external" href="https://hail.is/docs/0.2/hail.MatrixTable.html#hail.MatrixTable" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">MatrixTable</span></code></a>, <a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.vep_struct_to_csq">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">vep_struct_to_csq</code><span class="sig-paren">(</span><em class="sig-param">vep_expr</em>, <em class="sig-param">csq_fields='Allele|Consequence|IMPACT|SYMBOL|Gene|Feature_type|Feature|BIOTYPE|EXON|INTRON|HGVSc|HGVSp|cDNA_position|CDS_position|Protein_position|Amino_acids|Codons|ALLELE_NUM|DISTANCE|STRAND|VARIANT_CLASS|MINIMISED|SYMBOL_SOURCE|HGNC_ID|CANONICAL|TSL|APPRIS|CCDS|ENSP|SWISSPROT|TREMBL|UNIPARC|GENE_PHENO|SIFT|PolyPhen|DOMAINS|HGVS_OFFSET|MOTIF_NAME|MOTIF_POS|HIGH_INF_POS|MOTIF_SCORE_CHANGE|LoF|LoF_filter|LoF_flags|LoF_info'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#vep_struct_to_csq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.vep_struct_to_csq" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a VEP Struct, returns and array of VEP VCF CSQ strings (one per consequence in the struct).</p>
<p>The fields and their order will correspond to those passed in <cite>csq_fields</cite>, which corresponds to the
VCF header that is required to interpret the VCF CSQ INFO field.</p>
<p>Note that the order is flexible and that all fields that are in the default value are supported.
These fields will be formatted in the same way that their VEP CSQ counterparts are.</p>
<p>While other fields can be added if their name are the same as those in the struct. Their value will be the result of calling
hl.str(), so it may differ from their usual VEP CSQ representation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vep_expr</strong> (<a class="reference external" href="https://hail.is/docs/0.2/hail.expr.StructExpression.html#hail.expr.StructExpression" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StructExpression</span></code></a>) – The input VEP Struct</p></li>
<li><p><strong>csq_fields</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The | delimited list of fields to include in the CSQ (in that order)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://hail.is/docs/0.2/hail.expr.ArrayExpression.html#hail.expr.ArrayExpression" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayExpression</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The corresponding CSQ strings</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="gnomad.utils.vep.get_most_severe_consequence_for_summary">
<code class="sig-prename descclassname">gnomad.utils.vep.</code><code class="sig-name descname">get_most_severe_consequence_for_summary</code><span class="sig-paren">(</span><em class="sig-param">ht, csq_order=['transcript_ablation', 'splice_acceptor_variant', 'splice_donor_variant', 'stop_gained', 'frameshift_variant', 'stop_lost', 'start_lost', 'initiator_codon_variant', 'transcript_amplification', 'inframe_insertion', 'inframe_deletion', 'missense_variant', 'protein_altering_variant', 'splice_region_variant', 'incomplete_terminal_codon_variant', 'start_retained_variant', 'stop_retained_variant', 'synonymous_variant', 'coding_sequence_variant', 'mature_miRNA_variant', '5_prime_UTR_variant', '3_prime_UTR_variant', 'non_coding_transcript_exon_variant', 'non_coding_exon_variant', 'intron_variant', 'NMD_transcript_variant', 'non_coding_transcript_variant', 'nc_transcript_variant', 'upstream_gene_variant', 'downstream_gene_variant', 'TFBS_ablation', 'TFBS_amplification', 'TF_binding_site_variant', 'regulatory_region_ablation', 'regulatory_region_amplification', 'feature_elongation', 'regulatory_region_variant', 'feature_truncation', 'intergenic_variant'], loftee_labels=['HC', 'LC', 'OS']</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/gnomad/utils/vep.html#get_most_severe_consequence_for_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gnomad.utils.vep.get_most_severe_consequence_for_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare a hail Table for summary statistics generation.</p>
<dl class="simple">
<dt>Adds the following annotations:</dt><dd><ul class="simple">
<li><p>most_severe_csq: Most severe consequence for variant</p></li>
<li><p>protein_coding: Whether the variant is present on a protein-coding transcript</p></li>
<li><p>lof: Whether the variant is a loss-of-function variant</p></li>
<li><p>no_lof_flags: Whether the variant has any LOFTEE flags (True if no flags)</p></li>
</ul>
</dd>
</dl>
<p>Assumes input Table is annotated with VEP and that VEP annotations have been filtered to canonical transcripts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ht</strong> (<a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>) – Input Table.</p></li>
<li><p><strong>csq_order</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Order of VEP consequences, sorted from high to low impact. Default is CSQ_ORDER.</p></li>
<li><p><strong>loftee_labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Annotations added by LOFTEE. Default is LOFTEE_LABELS.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://hail.is/docs/0.2/hail.Table.html#hail.Table" title="(in Hail v0.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Table annotated with VEP summary annotations.</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vcf.html" class="btn btn-neutral float-left" title="gnomad.utils.vcf" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../resource_sources.html" class="btn btn-neutral float-right" title="Resource Sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>